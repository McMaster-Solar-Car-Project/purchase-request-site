# Lefthook is used for configuring git hooks such as pre-commit, pre-push, etc.
# Can read more here: https://github.com/evilmartians/lefthook
---
pre-commit:
  parallel: true
  commands:
    protect-main:
      run: |
        if [ "$(git rev-parse --abbrev-ref HEAD)" = "main" ]; then
          echo "‚ùå Direct commits to main branch are not allowed!"
          echo "Please create a feature branch and submit a pull request."
          exit 1
        fi
    ruff:
      glob: "*.py"
      run: ruff check --fix {staged_files} && ruff format {staged_files}
    gitleaks:
      run: gitleaks protect --verbose --redact --staged -c .gitleaks.toml 